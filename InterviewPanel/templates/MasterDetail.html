<!Doctype html>
<html>

<head>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
	      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
	        integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
	</script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
	        integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
	</script>
</head>
<body>
{%csrf_token%}

<div class="row" style="margin: 2%;">
	<div class="col-md-10 ">
		<input type="text" placeholder="Add Question" id="Question" class="form-control">
	</div>
</div>
<div class="card custom-card">
	<div class="card-header">
		Options
	</div>
	<div class="card-body">
		<div id="OptionInput" class="form-row">
			<div class="form-group col-md-5">
				<input type="text" class="form-control custom" id="Option" placeholder="Option"/>
			</div>
			<div class="form-group col-md-2">
				<input type="checkbox" value="true" class=" form-control form-control-md" id="IsTrue"/>
			</div>
			<div class="form-group col-md-5">
				<input type="button" style="width:90%" class="btn btn-success" id="AddOptionButton" value="Add"/>
			</div>
		</div>
		<div id="OptionDetailPlaceHolder">
		
		</div>
	</div>
	<div class="card-footer">
		<button class="btn btn-primary" style="width:100%" id="SubmitQuestion">Submit Question</button>
	</div>
</div>
<script>
        $("#AddOptionButton").click(function () {
            var $Row = $("#OptionInput").clone().removeAttr('id');
            //Assigning Values To Clone row
            $('#Option', $Row).val($('#Option').val());
            $('#IsTrue', $Row).val($('#IsTrue').val());
            //Replace add button with remove button
            $('#AddOptionButton', $Row).addClass('remove').val("Remove").removeClass('btn-success').addClass(
                'btn-danger');
            // //adding Class Attributes
            $('#Option', $Row).attr('class', 'Option form-control custom');
            $('#IsTrue', $Row).attr('class', 'IsTrue form-control form-control-md custom');
            $('#Option', $Row).prop("readonly", "true");
            $('#IsTrue', $Row).prop("readonly", "true");
            //Removing ID Attributes
            $('#Option,#IsTrue,#AddOptionButton', $Row).removeAttr('id');
            //Appending Row to New Row
            $('#OptionDetailPlaceHolder').append($Row)
            //Clearing Input Values
            $('#Option').val("");
            $('#IsTrue').prop("checked", false);
            //remove button click event
            $('#OptionDetailPlaceHolder').on('click', '.remove', function () {
                $(this).parents('.form-row').remove();
            });
        });


        $("#SubmitQuestion").click(function () {
            debugger;
            var Model = {
                Question: "",
                Options: []
            };
            Model.Question = $("#Question").val();
            ////Getting All Options
            $("#OptionDetailPlaceHolder .form-row").each(function () {
                var Option = {
                    Option: $(".Option", this).val(),
                    IsTrue: ($(".IsTrue", this).is(":checked")) ? "true" : "false",
                };
                Model.Options.push(Option);
            });



            ////Send Ajax Request... With Model
            console.log(Model);
            var abc = JSON.stringify(Model);
            console.log(abc)
            var x ={"name":"zain"};
          

                $.ajax({
                    url: "{%url 'InterviewPanel:question1' %}",
                    method: 'POST',
                    dataType: "json",
                    traditional: true,
                    contentType: 'application/json; charset=utf-8',
                    data:JSON.stringify(Model),
                   
                   success:function (result)
                   {
                    console.log(result)
                    if(result == "added"){
                    alert("A user with this username already exists.");
                    }
                   
                   }
             // }).fail(function (result) {
             // error("error occurred")
            //
             });

        });
    



</script>
</body>

</html>